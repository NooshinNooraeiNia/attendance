{% extends 'base.html' %}
{% block title %}Add Student{% endblock %}

{% block content %}
<div class="row">
    <div class="col-6">
        <h2>Add Student Form</h2>
        <form action="/add_student" method="post" enctype="multipart/form-data">
            <div class="form-group mb-2">
            <label for="student_no"><em class="red">* </em>Student Number:</label>
            <input class="form-control" type="number" id="student_no" name="student_no" required>
            </div>
            <div class="form-group mb-2">
            <label for="name"><em class="red">* </em>Student Name:</label>
            <input class="form-control" type="text" id="name" name="name" required>
            </div>
            <div class="form-group mb-2">
                <label for="image"><em class="red">* </em>Student Image:</label>
                <input class="form-control-file" type="file" id="image" name="image" accept=".jpg, .jpeg, .png" required>
            </div>
            <button type="submit" class="btn btn-primary">Add</button>
        </form>
    </div>

    <div class="col-6">
        <h2>Student Information</h2>
        <table id="student-info" class="table table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th class="th-sm">ID</th>
                <th class="th-sm">Photo</th>
                <th class="th-sm">Student Number</th>
                <th class="th-sm">Student Name</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
                <tr>
                    <td>{{ student[0] }}</td>
                    {% set image_path = student[3] %}
                    {% set image_filename = image_path.split('\\')[-1] %}
                    <td><img class="student-image" src="{{ url_for('static', filename='student_images/' + image_filename) }}"></td>
                    <td>{{ student[1] }}</td>
                    <td>{{ student[2] }}</td>
                </tr>
            {% endfor %}
        </tbody>
        </table>
    </div>
</div>
{% endblock %}




